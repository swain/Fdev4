("dialog" in jQuery.fn)||(function(b,c){var a=b.util.ua.ie6,d=1000;b.widget("ui.dialog",{options:{fixed:false,center:false,modalCSS:{backgroundColor:"#000",opacity:0.3},css:{left:0,top:0},fadeIn:false,fadeOut:false,modal:true,draggable:false,timeout:0},_create:function(){var e=this,h=e.options,f=e.widget(),g;e.position={left:h.css.left,top:h.css.top};if(f[0].style){e.elementDisplay=f[0].style.display;e.elementPosition=f[0].style.position}e.elementParent=f.parent();if(a){b("input:checkbox,input:radio",f).each(function(){this.defaultChecked=this.checked})}g=(e.contentLyr=b("<div>",{"class":"ui-dialog",css:b.extend({display:"none",position:(!a&&h.fixed)?"fixed":"absolute"},h.css||{})}).appendTo("body").append(f.show()));if(h.modal){b.ui.dialog.overlay.create(e);g.css("z-index",d++).bind("keydown.ui-dialog",function(k){if(k.keyCode!==b.ui.keyCode.TAB){return}var j=b(":tabbable",this),l=j.filter(":first"),i=j.filter(":last");if(k.target==i[0]&&!k.shiftKey){l.focus(1);return false}else{if(k.target===l[0]&&k.shiftKey){i.focus(1);return false}}})}else{g.css("z-index",d++);if(h.bgiframe){g.bgiframe()}}if(a){if(h.fixed){b(window).bind("scroll.ui-dialog",b.proxy(function(i){this._offsetContent()},e))}}if(h.fadeIn){e.isAnimated=true;g.fadeIn(h.fadeIn,function(){e.isAnimated=false;e._trigger("open")})}else{g.show();e._trigger("open")}if(h.center){e._center();if(h.fixed){b(window).bind("resize.ui-dialog",b.proxy(e,"_center"))}}else{e._offsetContent()}if(h.draggable&&b.fn.draggable){e._makeDraggable()}if(h.timeout){e.timeout=setTimeout(b.proxy(e,"close"),(h.fadeIn||0)+h.timeout)}},destroy:function(){var e=this,j=e.options,g=e.widget(),i=e.contentLyr,k=e.elementParent,f=e.elementPosition,h=e.elementDisplay;if(k.length){if(a){b("input:checkbox,input:radio",i).each(function(){this.defaultChecked=this.checked})}g.css({position:f||"",display:h||""});k.append(g);e.elementParent=e.elementPosition=e.elementDisplay=null}b.Widget.prototype.destroy.apply(e,arguments);b(window).unbind(".ui-dialog");i.unbind(".ui-dialog").remove();e._trigger("close");e.contentLyr=null;e.isAnimated=false},_makeDraggable:function(){var e=this,g=e.options;function f(h){return{position:h.position,offset:h.offset}}e.contentLyr.draggable({handle:g.handle||false,containment:"document",start:function(h,i){e._trigger("dragStart",h,f(i))},drag:function(h,i){e._trigger("drag",h,f(i))},stop:function(h,i){e._trigger("dragStop",h,f(i))}})},close:function(){var e=this;if(e.isAnimated){b.log("close: another dialog is closing!");return}var h=e.options,g=e.contentLyr,f;if(!e._trigger("beforeClose")){return}if(e.timeout){clearTimeout(e.timeout);e.timeout=null}if(h.modal){b.ui.dialog.overlay.close(e)}a&&g.bgiframe("close");if(h.fadeOut){e.isAnimated=true;g.fadeOut(h.fadeOut,b.proxy(e,"destroy"))}else{e.destroy()}},_setOption:function(g,h){var e=this;switch(g){case"zIndex":d=h;break;case"css":case"modalCSS":b.extend(e.options.key,h);break;case"draggable":var f=e.contentLyr.is(":data(draggable)");if(f&&!h){e.contentLyr.draggable("destroy")}if(!f&&h){e._makeDraggable()}break}},_offsetContent:function(){var f=this,i=f.options,h=b(window),e=f.position,g=((!a&&i.fixed)?0:h.scrollTop())+e.top;f.contentLyr.css({left:((!a&&i.fixed)?0:h.scrollLeft())+e.left,top:g<0?0:g})},_center:function(){var e=this,h=e.options,f=b(window),g=e.contentLyr;b.extend(e.position,{left:(f.width()-g.width())/2,top:(f.height()-g.height())/2});e._offsetContent()}});b.extend(b.ui.dialog,{version:"1.0",overlay:function(e){b.ui.dialog.overlay.create(e)}});b.extend(b.ui.dialog.overlay,{dialogs:[],maxZ:0,create:function(g){var f=this,j=g.options,h=f.modal,i=b(document),e=b(document.body);f.dialogs.push(g);if(h){h.css("z-index",(g.zIndex=f.maxZ=d++));a&&j.bgiframe&&h.bgiframe("close")}else{i.bind("keydown.ui-dialog-overlay,keypress.ui-dialog-overlay",function(k){if(k.target.nodeName!=="HTML"&&!b.contains(g.contentLyr[0],k.target)&&b(k.target).zIndex()<b.ui.dialog.overlay.maxZ){return false}});h=(f.modal=b("<div>",{"class":"ui-dialog-overlay",css:b.extend(j.modalCSS,{display:"none",zIndex:(g.zIndex=f.maxZ=d++),left:0,top:0},(a?{position:"absolute",width:e.width(),height:i.height()}:{position:"fixed",width:"100%",height:"100%"}))}).attr("tabindex","-1").appendTo(e));if(a){b(window).bind("resize.ui-dialog-overlay",function(){h.css({width:e.width(),height:i.height()})})}if(j.fadeIn){h.fadeIn(j.fadeIn,function(){if(j.bgiframe){h.bgiframe()}})}else{h.show();if(j.bgiframe){h.bgiframe()}}}},close:function(h){var f=this,k=h.options,j=f.dialogs,g=j.indexOf(h),e=j.length;if(g===e-1){j.pop();if(e>1){f.modal.css("z-index",(f.maxZ=j[e-2].zIndex))}else{f._destroy()}}else{j.splice(g,1)}},_destroy:function(){var e=this;b(document).unbind(".ui-dialog-overlay");if(a){b(window).unbind(".ui-dialog-overlay")}e.modal.remove();e.modal=null}});b.add("ui-dialog")})(jQuery);