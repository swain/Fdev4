("colorbox" in jQuery.fn)||(function(d,e){var a=d.util.ua.ie6,c,b;d.widget("ui.colorbox",{options:{popup:true,update:false,triggerType:"click"},_create:function(){var f=this,h=f.options,g=this.element;if(h.popup){f.activator=g}else{f.render();f.setColor(h.color||"#FFFFFF")}f._buildEvent()},render:function(){var s=this,u=s.options,z=this.element,A=[0,51,102,153,204,255,255,0,0,255,0,255],m=[0,51,102,153,204,255,0,255,0,255,255,0],q=[0,51,102,153,204,255,0,0,255,0,255,255];if(!s.con){if(u.popup){if(c&&c!==s){c.hide(null,true)}c=s;s.con=(b||(b=d("<div>",{"class":"ui-colorbox",css:{position:"absolute",background:"#FFF",display:"none"}}))).css("display","none").appendTo("body")}else{s.con=z}}s.con.html('<div class="wrap">                <em></em>                <table cellpadding="0" cellspacing="1">                    <thead>                        <th colspan="21">                            <h6></h6>                            <div class="rgb">#FFFFFF</div>                        </th>                    </thead>                    <tbody></tbody>                </table>            </div>');var g=d("tbody",s.con),l=d("em",s.con),y=d("h6",s.con),f=d("div.rgb",s.con),n,r,t,v;s.picker=l;s.viewer=y;s.rgb=f;for(var x=11;x>-1;x--){var k=g[0].insertRow(0);for(var w=20;w>-1;w--){var p=k.insertCell(0);if(w===0||w===2){n=r=t=0}else{if(w===1){n=A[x];r=m[x];t=q[x]}else{n=51*(3*parseInt(x/6)+parseInt((w-3)/6));r=51*((w-3)%6);t=51*(x%6)}}n=n.toString(16);r=r.toString(16);t=t.toString(16);n=(n.length===1?("0"+n):n);r=(r.length===1?("0"+r):r);t=(t.length===1?("0"+t):t);v="#"+n+r+t;p.style.backgroundColor=v;p.title=v.toUpperCase()}}g.delegate("td","mouseover.ui-colorbox",function(i){var j=d(this),h=j.attr("title");s.setColor(h,j);s._trigger("change",i,{color:h})});l.bind("click.ui-colorbox",function(i){var h=s.color;s._trigger("select",i,{color:h});if(u.update){s.activator.val(h)}})},_destroy:function(){this.hide(true)},_buildEvent:function(){var f=this,g=f.options;if(!g.popup){return this}f.activator.bind(g.triggerType,function(h){h.preventDefault();f.show()});if(g.update){f.activator.bind("keyup.ui-colorbox",function(){f.setColor(this.value)})}return f},toggle:function(){var f=this;if(f.con){f.hide()}else{f.show()}},show:function(){var h=this;if(h.con){return}h.render();var k=h.options,j=h.activator.offset(),i=j.left,f=h.activator.outerHeight(),g=j.top+f;h.con.css({left:i,top:g}).fadeIn(150,function(){if(k.popup){d(document).unbind("click.ui-colorbox").bind("click.ui-colorbox",function(l){if(d(l.target)[0]===h.activator[0]){return}h.hide()});h.con.bind("click.ui-colorbox",function(l){l.stopPropagation()})}});h.setColor(k.update?h.activator.val():h.color);return h},hide:function(g){var f=this;if(!f.con){return}var i=f.options;if(i.popup){d(document).unbind("click.ui-colorbox")}function h(){f.con.remove();d.extend(f,{con:null,picker:null,viewer:null,rgb:null})}if(g){h()}else{f.con.fadeOut(150,h)}return f},setColor:function(g,i){if(g){var f=this,i=i||d("td[title="+g+"]",f.con);if(i.length){var h=i.offset();f.picker.offset({top:h.top-1,left:h.left-1});f.viewer.css("background-color",g);f.rgb.html(g);f.color=g}}return this}});d.add("ui-colorbox")})(jQuery);