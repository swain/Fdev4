("Suggestion" in FE.ui)||(function(a,b){function c(e,f){var d=this;d.element=a(e).eq(0);if(!d.element.length){return}d.options=f||{};d._init()}c.prototype={_init:function(){var d=this,g=d.options,e=d.element,f;e.autocomplete({source:function(i,h){d.ajax&&d.ajax.abort();d.ajax=a.ajax({url:g.url||"http://suggest.china.alibaba.com/bin/suggest",dataType:"script",data:a.paramSpecial({type:g.type,q:i.term}),success:function(){var m=window._suggest_result_,j=m.result||{},l=0,n;if(m.pCity){n=m.pCity[0][1]+m.pCity[0][2];j.splice(0,0,m.pCity[0])}var k=a.map(j,function(p){var o=p[0].replace("_","<em>").replace("%","</em>"),q=p[0].replace(/[_%]/g,"").trim(),r=!!p[2]?(p[1]+p[2]):p[1];return{label:o,desc:r,value:q,index:l++}});h(k)}})},select:function(i,h){e.val(h.item.value);g.onSelected&&g.onSelected.call(d,i,h)},open:function(h,i){i.menu.element.width(e.width()+g.widthfix)},minLength:1,appendTo:g.appendTo,position:g.position});f=e.data("autocomplete");f._renderItem=function(h,i){return a("<li>").data("item.autocomplete",i).html(function(){if(/^\d+$/.test(i.desc)){return'<span class="suggest-key">'+i.label+'</span><span class="suggest-result">约'+i.desc+"条结果</span>"}else{return'<span class="suggest-key">'+i.label+'</span><span class="suggest-city">在<em>“'+i.desc+"”</em>里找</span>"}}).appendTo(h)};f.menu.element.addClass("web-suggestion")},setOptions:function(d){a.extend(this.options,d);return this},enable:function(){this.element.autocomplete("enable")},disable:function(){this.element.autocomplete("disable")}};b.Suggestion=c})(jQuery,FE.ui);