("Achievement" in jQuery.util)||(function(d){var h={};var i=false;var a,b,c,j,f,e,g=complete=0;d.util.Achievement={add:function(l,k,m){if(h[l]){return}h[l]={name:k,description:m,pass:0,fail:0,ready:false};if(i){this._render(l,h[l])}},init:function(){if(i){return}a=d("#achievement");b=d(">.agent",a);c=d(">.status",a).html('共<span class="total">0</span>个成就，您已完成<span class="complete">0</span>个！');j=d(">span.total",c);f=d(">span.complete",c);e=d(">.list",a);b.text(navigator.userAgent);for(var k in h){this._render(k,h[k])}this._buildEvent();i=true},_render:function(o,k){var n=d("<dl>");var q=d("<dt>");var m=d("<label>").html('(<span class="pass">0</span>, <span class="fail">0</span>)');var p=d("<div>").html('<span class="drag"></span>');var r=d("<h6>").text([o,": ",k.name].join("")).append(m);n.append(d("<dt>").append(r).append(p)).addClass(o);if(k.description){var l=d("<ol>");d.each(k.description,function(s,t){l.append(d("<li>").text(t))});n.addClass("description").append(d("<dd>").append(l))}e.append(n);k.ready=true;g++;j.text(g)},_buildEvent:function(){d.use("ui-draggable",function(){a.draggable({handle:d("h1",a)})});d.use("ui-portlets",function(){e.portlets({axis:"y",items:">dl",handle:"span",placeholder:function(){return d("<dl>").addClass("ui-portlets-placeholder")},revert:150,capture:function(l,k){d(">dd",k.currentItem).hide()},stop:function(l,k){d(">dd",k.currentItem).hide()}})});e.delegate("dt","click",function(l){var k=d(this).next();if(k.length){k.slideToggle(150)}});e.delegate("span","click",function(k){k.stopPropagation()});e.delegate("dl","mouseover",function(k){d(this).addClass("hover")});e.delegate("dl","mouseleave",function(k){d(this).removeClass("hover")})},check:function(o,l){if(!i){return}var k=h[o];if(!k){return}var n=d(">dl."+o,e),m;if(!k.status){complete++;f.text(complete)}if(l){k.pass++;d("span.pass",n).text(k.pass)}else{k.fail++;d("span.fail",n).text(k.fail)}if(!k.pass){m="fail"}else{if(!k.fail){m="pass"}else{m="warn"}}k.status=m;n.removeClass("pass fail").addClass(m)},equal:function(k,m,l){this.check(k,m==l)},strictEqual:function(k,m,l){this.check(k,m===l)},deepEqual:function(k,m,l){this.check(k,this._equiv(m,l))},_equiv:(function(){var o;var p=[];var l=[];function n(s,r,q){var t=d.type(s);if(t){if(d.type(r[t])==="function"){return r[t].apply(r,q)}else{return r[t]}}}var k=Object.getPrototypeOf||function(q){return q.__proto__};var m=function(){function q(r,s){if(r instanceof s.constructor||s instanceof r.constructor){return s==r}else{return s===r}}return{string:q,"boolean":q,number:q,"null":q,"undefined":q,nan:function(r){return isNaN(r)},date:function(r,s){return d.type(r)==="date"&&s.valueOf()===r.valueOf()},regexp:function(r,s){return d.type(r)==="regexp"&&s.source===r.source&&s.global===r.global&&s.ignoreCase===r.ignoreCase&&s.multiline===r.multiline},"function":function(){var r=p[p.length-1];return r!==Object&&typeof r!=="undefined"},array:function(s,u){var w,v,t;var r;if(!(d.type(s)==="array")){return false}r=u.length;if(r!==s.length){return false}l.push(u);for(w=0;w<r;w++){t=false;for(v=0;v<l.length;v++){if(l[v]===u[w]){t=true}}if(!t&&!o(u[w],s[w])){l.pop();return false}}l.pop();return true},object:function(s,u){var x,v,t;var r=true;var w=[],y=[];if(u.constructor!==s.constructor){if(!((k(u)===null&&k(s)===Object.prototype)||(k(s)===null&&k(u)===Object.prototype))){return false}}p.push(u.constructor);l.push(u);for(x in u){t=false;for(v=0;v<l.length;v++){if(l[v]===u[x]){t=true}}w.push(x);if(!t&&!o(u[x],s[x])){r=false;break}}p.pop();l.pop();for(x in s){y.push(x)}return r&&o(w.sort(),y.sort())}}}();o=function(){var q=Array.prototype.slice.apply(arguments);if(q.length<2){return true}return(function(s,r){if(s===r){return true}else{if(s===null||r===null||typeof s==="undefined"||typeof r==="undefined"||d.type(s)!==d.type(r)){return false}else{return n(s,m,[r,s])}}})(q[0],q[1])&&arguments.callee.apply(this,q.splice(1,q.length-1))};return o})()};d.add("util-achievement")})(jQuery);